# RPSSL

A web app implementation of **Rock-Paper-Scissors-Spock-Lizard** through an ASP.NET REST Service with a React frontend.

## Running with Docker

You first need to generate the docker image and then run it in a container. Position yourself in the root directory and run the following commands:
```
docker build -t rpssl -f Service/RPSSL.API/Dockerfile .
docker run -it --rm -p 0:8080 -p 0:8081 -e --name rpssl rpssl
```

The first command will create the docker image for linux environment which can be started in a container with the second command. When you exit the program with *ctrl+c* the container will be deleted.

If you wish to run it in the Development mode which also gives access to swagger, add this parameter to the *docker run* command:
```
-e "ASPNETCORE_ENVIRONMENT=Development"
```

Http port is 8080 by default, HTTPS is at 8081. To see which localhost ports the Docker container ports are mapped to run:
```
docker ps -a
```

You can access the swagger API docs at: localhost:port/swagger\
The base API url is: localhost:port/api

## Starting the Frontend

The frontend is implemented in React. Install Node.js to be able to run it.

The frontend needs the URL of the API. Update the .env file or create .env.local and put your API URL under the variable *REACT_APP_API_URL*.

Once the API URL has been setup simply run:

```
npm install
npm start
```

The URL of the frontend needs to be added to the CORS policy of the service. In the appsettings.json configuration, under the 'ConnectionStrings' section, add the URL of your frontend to the 'FrontendUrl' field.

## Test UI

To setup the [test UI](https://codechallenge.boohma.com/) you need to input the root url of this API: <[http/https]://localhost:[port]/api>.

You also need to disable JWT Authentication and Authorizaiton in the RPSSL.API Program.cs

After that the basic functionallities of the API can be tested in this lightweight environment.

## Random number generation

For random number generation an external service is being used.

The URL of that service is configurable. It is located in the appsettings.json configurations, under the 'ConnectionStrings' section, with field name 'ExternalRandomGeneratorUrl'.

## Game victory algorithm

Each valid shape a player can use is mapped to an ID number. The IDs are numbers 1 through 5, in the same order as the order the shapes take in the name of the game (eg. *Paper* is 2, *Spock* is 4).

With IDs mapped this way, we see that the IDs in the first column only win against IDs in columns two and three:

| Shape  | Weak shape 1 | Weak shape 2 |
|:------:|:------------:|:------------:|
|   1    |      3       |      5       |
|   2    |      1       |      4       |
|   3    |      2       |      5       |
|   4    |      1       |      3       |
|   5    |      2       |      4       |

Analyzing the table, we can see that shapes only win against IDs which are bigger by 2 or 4 in modulo 5, ergo they lose against IDs bigger by 1 or 3.

Simplified, this means that if *shape_1* and *shape_2* are not the same, and the difference between their IDs in modulo 5 is an **even** number then *shape_1* **wins**, otherwise it **loses**.

## Useful Links and credits

Test UI: <https://codechallenge.boohma.com/> \
For game rules refer to: <https://www.samkass.com/theories/RPSSL.html> \
.gitignore generated by: <https://www.toptal.com/developers/gitignore> \
Hand shape images taken from: <https://en.wikipedia.org/wiki/Rock_paper_scissors>
